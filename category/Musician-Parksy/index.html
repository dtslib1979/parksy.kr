<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Musician Parksy — @musician-parksy</title>
<meta name="description" content="Parksy Piano Minimal — PD Classical BGM, ASMR Piano, YouTube @musician-parksy" />

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pirata+One&family=Philosopher:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg1:#0e1320; --bg2:#0a0f1a; --panel:#0f1728; --panel-hi:#141e33;
  --ink:#e6f0ff; --ink-2:#bcd0ff; --ink-3:#8fa7d9;
  --cyan:#38e8ff; --teal:#22d3ee; --violet:#7c6fd6; --lime:#a3ffb0;
  --grid:rgba(88,127,255,.12);
  --line:rgba(120,180,255,.25); --line-2:rgba(120,180,255,.5);
  --shadow:0 24px 70px rgba(0,0,0,.45);
}
*{box-sizing:border-box} html,body{margin:0;padding:0} html{scroll-behavior:smooth}
body{
  font-family:'Philosopher',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--ink);
  background:
    radial-gradient(60vw 60vh at 20% 20%, #14203a 0%, transparent 60%),
    radial-gradient(60vw 60vh at 80% 80%, #171f33 0%, transparent 60%),
    linear-gradient(180deg,var(--bg1),var(--bg2));
  min-height:100vh; overflow-x:hidden; position:relative;
}
body::before{
  content:""; position:fixed; inset:0; z-index:0; pointer-events:none;
  background:
    linear-gradient(transparent 23px, var(--grid) 24px),
    linear-gradient(90deg, transparent 23px, var(--grid) 24px);
  background-size:24px 24px;
}
body::after{
  content:""; position:fixed; inset:0; z-index:0; pointer-events:none;
  background:
    radial-gradient(800px 800px at 70% 20%, rgba(56,232,255,.06), transparent 60%),
    radial-gradient(700px 700px at 20% 80%, rgba(124,111,214,.06), transparent 60%);
}

/* Header */
.header{position:relative;z-index:5;text-align:center;padding:clamp(1.5rem,4vw,3rem) 1rem 1rem}
.title{
  font-family:'Pirata One',serif; letter-spacing:2px;
  font-size:clamp(2rem,5vw,3.4rem);
  background:linear-gradient(90deg,var(--teal),var(--cyan),var(--violet));
  background-size:200% 100%;
  -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
  margin:0 0 .3rem; text-transform:uppercase; animation:shine 10s linear infinite;
}
@keyframes shine{0%{background-position:0% 50%}100%{background-position:200% 50%}}
.subtitle{color:var(--ink-2);opacity:.9;font-size:clamp(.9rem,2vw,1.1rem);margin:0}
.channel-link{
  display:inline-block;margin-top:.5rem;padding:.4rem .8rem;border-radius:8px;
  background:rgba(56,232,255,.08);border:1px solid var(--line);
  color:var(--cyan);text-decoration:none;font-size:.85rem;font-weight:700;
  transition:.2s;
}
.channel-link:hover{background:rgba(56,232,255,.15);transform:translateY(-1px)}

/* Controls */
.controls{
  position:relative;z-index:5;display:flex;justify-content:center;align-items:center;flex-wrap:wrap;gap:.5rem;
  max-width:900px; margin:1rem auto; padding:0 1rem;
}
.tab{
  padding:.5rem 1rem;border:none;border-radius:10px;cursor:pointer;
  font-weight:800;font-size:.85rem;letter-spacing:.3px;
  background:linear-gradient(180deg, rgba(22,34,59,.9), rgba(19,29,48,.95));
  color:var(--ink-3); border:1px solid var(--line); transition:.2s;
}
.tab.active{
  background:linear-gradient(180deg,#1c2b4b,#22335a);
  color:#eaffff; border-color:var(--line-2);
  box-shadow:0 0 0 1px rgba(56,232,255,.35), 0 4px 12px rgba(0,0,0,.3);
}
.tab:hover:not(.active){color:var(--ink-2)}

/* Main */
.wrap{position:relative;z-index:4;max-width:900px;margin:0 auto;padding:0 1rem 3rem}
.counter{
  text-align:center;margin-bottom:1rem;font-size:.9rem;color:var(--ink-3);
}
.counter b{
  font-family:'Pirata One',serif;font-size:1.4rem;
  background:linear-gradient(90deg,var(--teal),var(--cyan));
  -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
  margin:0 .3rem;
}

/* Video list */
.video-list{display:flex;flex-direction:column;gap:1.2rem}

.video-card{
  position:relative;border-radius:14px;overflow:hidden;
  background:linear-gradient(180deg, rgba(17,25,43,.92), rgba(16,24,41,.92));
  border:1px solid var(--line); box-shadow:var(--shadow);
}
.video-embed{
  position:relative;width:100%;padding-bottom:56.25%;background:#000;
}
.video-embed iframe{
  position:absolute;top:0;left:0;width:100%;height:100%;border:none;
}
.video-embed .lazy-placeholder{
  position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
  background:#0a0f1a;cursor:pointer;transition:.2s;
}
.video-embed .lazy-placeholder:hover{background:#111828}
.lazy-placeholder .play-icon{
  width:64px;height:64px;border-radius:50%;
  background:rgba(56,232,255,.15);border:2px solid var(--cyan);
  display:flex;align-items:center;justify-content:center;
  transition:.2s;
}
.lazy-placeholder:hover .play-icon{background:rgba(56,232,255,.25);transform:scale(1.05)}
.play-icon::after{
  content:"";display:block;width:0;height:0;
  border-top:12px solid transparent;border-bottom:12px solid transparent;
  border-left:20px solid var(--cyan);margin-left:4px;
}

.video-meta{padding:1rem 1.2rem}
.video-title{font-size:1.1rem;font-weight:700;margin:0 0 .4rem;color:var(--ink)}
.video-info{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;font-size:.82rem;color:var(--ink-3)}
.video-info .tag{
  display:inline-block;padding:.15rem .5rem;border-radius:.6rem;
  font-size:.72rem;background:rgba(56,232,255,.08);border:1px solid var(--line);
}
.video-info .program-badge{
  display:inline-flex;align-items:center;padding:.2rem .5rem;border-radius:.6rem;
  font-size:.72rem;font-weight:800;color:#021018;
  background:linear-gradient(90deg,var(--teal),var(--cyan));
}

/* Empty state */
.empty{
  text-align:center;padding:4rem 2rem;
  color:var(--ink-3);font-size:1rem;
}
.empty .icon{font-size:3rem;margin-bottom:1rem;opacity:.5}
.empty p{margin:.3rem 0}

/* Back link */
.back{
  position:relative;z-index:5;display:block;max-width:900px;margin:0 auto;padding:1rem;
}
.back a{
  font-weight:700;text-decoration:none;color:var(--ink-2);
  padding:.5rem 1rem;border-radius:10px;
  background:linear-gradient(180deg, rgba(20,30,51,.9), rgba(18,27,45,.9));
  border:1px solid var(--line); transition:.2s;
}
.back a:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.3)}

/* Loading */
.loading{text-align:center;padding:2rem;color:var(--ink-3);font-size:.9rem}
</style>
</head>
<body>
  <header class="header">
    <h1 class="title">Musician Parksy</h1>
    <p class="subtitle">PD Classical Piano + Ambient ASMR</p>
    <a class="channel-link" href="https://youtube.com/@musician-parksy" target="_blank" rel="noopener">@musician-parksy</a>
  </header>

  <nav class="controls" id="tabs"></nav>

  <div class="back"><a href="/">&#8592; Back to Grimoire</a></div>

  <main class="wrap">
    <div class="counter" id="counter"></div>
    <div id="loading" class="loading">Loading videos...</div>
    <div class="video-list" id="video-list"></div>
  </main>

<script>
const MANIFEST_URL = '../../data/youtube/musician-videos.json';
const PROGRAMS = ['All', 'P2', 'P3', 'P4', 'P5'];
let allItems = [];
let currentFilter = 'All';

document.addEventListener('DOMContentLoaded', init);

async function init() {
  buildTabs();
  try {
    const res = await fetch(MANIFEST_URL, { cache: 'no-cache' });
    if (!res.ok) throw new Error(res.status);
    const data = await res.json();
    allItems = Array.isArray(data.items) ? data.items : [];
  } catch (e) {
    allItems = [];
  }
  document.getElementById('loading').style.display = 'none';
  render();
}

function buildTabs() {
  const nav = document.getElementById('tabs');
  PROGRAMS.forEach(p => {
    const btn = document.createElement('button');
    btn.className = 'tab' + (p === 'All' ? ' active' : '');
    btn.textContent = p;
    btn.addEventListener('click', () => {
      nav.querySelectorAll('.tab').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentFilter = p;
      render();
    });
    nav.appendChild(btn);
  });
}

function render() {
  const filtered = currentFilter === 'All'
    ? allItems
    : allItems.filter(v => v.program === currentFilter);

  // Counter
  const counter = document.getElementById('counter');
  counter.innerHTML = filtered.length > 0
    ? '<b>' + filtered.length + '</b> video' + (filtered.length !== 1 ? 's' : '') + (currentFilter !== 'All' ? ' in ' + currentFilter : '')
    : '';

  const list = document.getElementById('video-list');
  list.innerHTML = '';

  if (filtered.length === 0) {
    list.innerHTML =
      '<div class="empty">' +
        '<div class="icon">&#127925;</div>' +
        '<p>No videos deployed yet.</p>' +
        '<p style="font-size:.85rem;opacity:.7">Run deploy-musician.sh to add the first video.</p>' +
      '</div>';
    return;
  }

  // Newest first
  const sorted = [...filtered].sort((a, b) =>
    new Date(b.uploadedAt || 0) - new Date(a.uploadedAt || 0)
  );

  sorted.forEach(v => {
    const card = document.createElement('div');
    card.className = 'video-card';

    // Lazy YouTube embed
    const embed = document.createElement('div');
    embed.className = 'video-embed';

    const placeholder = document.createElement('div');
    placeholder.className = 'lazy-placeholder';
    placeholder.innerHTML = '<div class="play-icon"></div>';
    placeholder.addEventListener('click', () => {
      embed.innerHTML =
        '<iframe src="https://www.youtube-nocookie.com/embed/' +
        esc(v.videoId) + '?autoplay=1&rel=0" ' +
        'allow="autoplay;encrypted-media" allowfullscreen loading="lazy"></iframe>';
    });
    embed.appendChild(placeholder);

    // Meta
    const meta = document.createElement('div');
    meta.className = 'video-meta';

    const title = document.createElement('h3');
    title.className = 'video-title';
    title.textContent = v.title || 'Untitled';

    const info = document.createElement('div');
    info.className = 'video-info';

    if (v.program) {
      const badge = document.createElement('span');
      badge.className = 'program-badge';
      badge.textContent = v.program;
      info.appendChild(badge);
    }
    if (v.composer) {
      const tag = document.createElement('span');
      tag.className = 'tag';
      tag.textContent = v.composer;
      info.appendChild(tag);
    }
    if (v.work) {
      const tag = document.createElement('span');
      tag.className = 'tag';
      tag.textContent = v.work;
      info.appendChild(tag);
    }
    if (v.ambient) {
      const tag = document.createElement('span');
      tag.className = 'tag';
      tag.textContent = v.ambient;
      info.appendChild(tag);
    }
    if (v.style) {
      const tag = document.createElement('span');
      tag.className = 'tag';
      tag.textContent = v.style;
      info.appendChild(tag);
    }

    meta.appendChild(title);
    meta.appendChild(info);
    card.appendChild(embed);
    card.appendChild(meta);
    list.appendChild(card);
  });
}

function esc(s) {
  return (s || '').toString().replace(/[&<>"']/g, m => ({
    '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'
  }[m]));
}
</script>
</body>
</html>
